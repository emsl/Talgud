<h1><%= t('.title') %></h1>

<div class="datacontent">
  <table class="datatable">
  <thead>
  <tr>
    <th><%= order @search, :by => :name, :as => t('formtastic.labels.event.name') %></th>
    <th><%= order @search, :by => :code, :as => t('formtastic.labels.event.code') %></th>
    <th><%= order @search, :by => :event_type_name, :as => t('formtastic.labels.event.event_type') %></th>    
    <th><%= h t('formtastic.labels.event.manager') %></th>
    <th><%= order @search, :by => :max_participants, :as => t('formtastic.labels.event.max_participants_short') %></th>
    <th><%= order @search, :by => :location_address_county_name, :as => t('formtastic.labels.event.location_address') %></th>
    <th><%= order @search, :by => :status, :as => t('formtastic.labels.event.status') %></th>
    <th><%= order @search, :by => :created_at, :as => t('admin.common.created_at') %></th>
    <th></th>
  </tr>
  </thead>
  <% for event in @events %>
  <tr>
    <td><%=h truncate(event.name) %></td>
    <td><%=h event.code %></td>
    <td><%=h event.event_type.name %></td>    
    <td><%= managers_for_object(event) %></td>
    <td><%=h event.max_participants %></td>
    <td><%=h truncate(event.location_address, :size => 20) %></td>
    <td><%=h t("formtastic.labels.event.statuses.#{event.status}") %></td>
    <td><%=h event.created_at.strftime('%d.%m') unless event.created_at.nil? %></td>
    <td class="actions">
      <% if permitted_to?(:read, :admin_events) %>
      <%= link_to t('admin.common.view'), admin_event_path(event.id) %>
      <% end %>
      <% if permitted_to?(:edit, :admin_events) %>
      <%= link_to t('admin.common.edit'), edit_admin_event_path(event.id) %>
      <% end %>
    </td>
  </tr>
  <% end %>
  </table>
  <%= paginate %>
</div>